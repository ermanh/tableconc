<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>TableConc - Concordancer for Tabular Data</title>


    <link href="style.css" rel="stylesheet">
</head>

<body><div id="non-results">
    <div id="banner">
        <!-- <text id="title"></text>
        &nbsp;&nbsp; -->
        <div id="light-container">
            <svg id="light-control" class="light-dark-controls is-light">
                <circle cx="12" cy="12" r="5" />
                <path d="M12,2 L12,4 M12,22 L12,20  M2,12 L4,12 M22,12 L20,12
                                         M7,7 L5,5 M17,17 L19,19    M17,7 L19,5 M7,17 L5,19" />
            </svg>
        </div>
        <div id="dark-container">
            <svg id="dark-control" class="light-dark-controls is-light">
                <path d="M7,5 C 23,1 23,23 7,19 C 15,19 15,5 7,5" />
            </svg>
        </div>
        <div class="control-container">
            <svg id="hide-controls">
                <circle cx="10" cy="10" r="5" />
                <path d="M19,19 L13,13" />
            </svg>
        </div>
        <div class="control-container">
            <svg id="hide-column-controls">
                <rect x="5" y="5" width="7" height="14" />
                <rect x="12" y="5" width="7" height="14" />
            </svg>
        </div>
        &nbsp;&nbsp;
        <input id="choose-file" type="file" accept=".csv,.tsv,.txt,.json,.xml" style="width:200px;">
        <input id="column-headers" type="checkbox" checked>
        <label id="column-headers-label" for="column-headers">Contains headers</label>
        
    </div>
    <div id="controls">
        <form id="search-box" onsubmit="return false;">
            <table><tr>
                <table><tr>
                    <td class="controls-first-column">
                        <div>
                            <svg id="second-search-hider" height="12" width="12">
                                <path d="M1,6 L11,6 M6,1 L6,11" />
                            </svg>
                        </div>
                        <div>
                            <svg id="third-search-hider" height="12" width="12">
                                <path d="M1,6 L11,6 M6,1 L6,11" />
                            </svg>
                        </div>
                    </td>
                    <td style="width: 250px;">
                        <label for="column-selection">Search column</label>
                        <select name="column-selection" id="column-selection"></select>
                        <br>
                        <input id="search-input" class="search" type="search" placeholder="Search..." disabled>
                    </td>
                    <td>
                        <input id="full-words" type="checkbox" checked disabled>
                        <label id="full-words-label" for="full-words">
                            Full words
                            <div class="infotip">
                                &nbsp;i&nbsp;
                                <span class="infotiptext">
                                    If selected, searching "know" won't match "known" or "knowledge"
                                </span>
                            </div>
                        </label>
                        <br>
                        <input id="regex" type="checkbox" disabled>
                        <label id="regex-label" for="regex">Regular expression</label>
                    </td>
                    <td>
                        <select name="match-where" id="match-where" disabled>
                            <option value="match-anywhere">Match anywhere</option>
                            <option value="match-entire">Match exact</option>
                            <option value="match-beginning">Match beginning</option>
                            <option value="match-end">Match end</option>
                        </select>
                        <br>
                        <input id="case-sensitive" type="checkbox" disabled>
                        <label for="case-sensitive">Case-sensitive</label>
                    </td>
                    <td>
                        <input id="concordance-display" type="checkbox" checked disabled>
                        <label for="concordance-display">Concordance</label>
                        <input class="cutoff" id="concordance-cutoff" type="number" value="50" disabled>
                        <div class="infotip">
                            &nbsp;i&nbsp;
                            <span class="infotiptext">
                                Sets the maximum length displayed on each side
                                of the matched pattern
                            </span>
                        </div>
                        <br>
                        <input id="findall" type="checkbox" disabled>
                        <label for="findall">Find all instances</label>
                    </td>
                    <td style="width: 12px;">
                        <div id="picker-div-1" class="picker-div">
                            <input id="picker-1" type="color" value="#ff0000" disabled>
                        </div>
                        <div id="bg-picker-div-1" class="picker-div">
                            <input id="bg-picker-1" type="color" value="#fcdad8" disabled>
                        </div>
                    </td>
                </tr></table>
                <table id="second-search"><tr>
                    <td class="controls-first-column"></td>
                    <td style="width: 250px;">
                        <label for="column-selection2">Search column</label>
                        <select name="column-selection2" id="column-selection2"></select>
                        <br>
                        <input id="search-input2" class="search" type="search" placeholder="Search..." disabled>
                    </td>
                    <td>
                        <input id="full-words2" type="checkbox" checked disabled>
                        <label id="full-words-label2" for="full-words2">
                            Full words
                            <div class="infotip">
                                &nbsp;i&nbsp;
                                <span class="infotiptext">
                                    If selected, searching "know" won't match "known" or "knowledge"
                                </span>
                            </div>
                        </label>
                        <br>
                        <input id="regex2" type="checkbox" disabled>
                        <label id="regex-label2" for="regex2">Regular expression</label>
                    </td>
                    <td>
                        <select name="match-where2" id="match-where2" disabled>
                            <option value="match-anywhere2">Match anywhere</option>
                            <option value="match-entire2">Match exact</option>
                            <option value="match-beginning2">Match beginning</option>
                            <option value="match-end2">Match end</option>
                        </select>
                        <br>
                        <input id="case-sensitive2" type="checkbox" disabled>
                        <label for="case-sensitive2">Case-sensitive</label>
                    </td>
                    <td>
                        <input id="concordance-display2" type="checkbox" checked disabled>
                        <label for="concordance-display2">Concordance</label>
                        <input class="cutoff" id="concordance-cutoff2" type="number" value="50" disabled>
                        <div class="infotip">
                            &nbsp;i&nbsp;
                            <span class="infotiptext">
                                Sets the maximum length displayed on each side
                                of the matched pattern
                            </span>
                        </div>
                        <br>
                        <input id="findall2" type="checkbox" disabled>
                        <label for="findall2">Find all instances</label>
                    </td>
                    <td style="width: 12px;">
                        <div id="picker-div-2" class="picker-div">
                            <input id="picker-2" type="color" value="#0c5eec" disabled>
                        </div>
                        <div id="bg-picker-div-2" class="picker-div">
                            <input id="bg-picker-2" type="color" value="#d3e2fa" disabled>
                        </div>
                    </td>
                </tr></table>
                <table id="third-search">
                    <tr>
                        <td class="controls-first-column"></td>
                        <td style="width: 250px;">
                            <label for="column-selection3">Search column</label>
                            <select name="column-selection3" id="column-selection3"></select>
                            <br>
                            <input id="search-input3" class="search" type="search" placeholder="Search..." disabled>
                        </td>
                        <td>
                            <input id="full-words3" type="checkbox" checked disabled>
                            <label id="full-words-label3" for="full-words3">
                                Full words
                                <div class="infotip">
                                    &nbsp;i&nbsp;
                                    <span class="infotiptext">
                                        If selected, searching "know" won't match "known" or "knowledge"
                                    </span>
                                </div>
                            </label>
                            <br>
                            <input id="regex3" type="checkbox" disabled>
                            <label id="regex-label3" for="regex3">Regular expression</label>
                        </td>
                        <td>
                            <select name="match-where3" id="match-where3" disabled>
                                <option value="match-anywhere3">Match anywhere</option>
                                <option value="match-entire3">Match exact</option>
                                <option value="match-beginning3">Match beginning</option>
                                <option value="match-end3">Match end</option>
                            </select>
                            <br>
                            <input id="case-sensitive3" type="checkbox" disabled>
                            <label for="case-sensitive3">Case-sensitive</label>
                        </td>
                        <td>
                            <input id="concordance-display3" type="checkbox" checked disabled>
                            <label for="concordance-display3">Concordance</label>
                            <input class="cutoff" id="concordance-cutoff3" type="number" value="50" disabled>
                            <div class="infotip">
                                &nbsp;i&nbsp;
                                <span class="infotiptext">
                                    Sets the maximum length displayed on each side
                                    of the matched pattern
                                </span>
                            </div>
                            <br>
                            <input id="findall3" type="checkbox" disabled>
                            <label for="findall3">Find all instances</label>
                        </td>
                        <td style="width: 12px;">
                            <div id="picker-div-3" class="picker-div">
                                <input id="picker-3" type="color" value="#008000" disabled>
                            </div>
                            <div id="bg-picker-div-3" class="picker-div">
                                <input id="bg-picker-3" type="color" value="#e0edd3" disabled>
                            </div>
                        </td>
                    </tr>
                </table>
            </tr></table>
            <table style="height: 5px;"></table>
            <table>
                <tr>
                    <td class="controls-first-column"></td>
                    <td><button id="search-button" disabled>Search</button></td>
                </tr>
            </table>
            
        </form>
    </div>
    <div id="columnselect">
        <button id="search-button-outside" form="search-box" disabled>
            Reset</button>
        &nbsp;Display columns:&nbsp;&nbsp;&nbsp;&nbsp;
        <text id="columns-to-show"></text>
    </div>
    <div id="results">
        <div id="results-number"></div>
        <table id="results-table">
        </table>
    </div>

    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js"></script>
    <script>
        var $j = jQuery.noConflict();
        $j(document).ready(function() {});
    </script>
    <script src="helpers.js" charset="utf-8"></script>
    <script src="filehandler.js" charset="utf-8"></script>
    <script src="formlisteners.js" charset="utf-8"></script>
    <script src="search.js" charset="utf-8"></script>

    <script>
        var json = [
            { "One": "aaa", "Two": "bbb", "Three": "ccc" },
            { "One": "abc", "Two": "bca", "Three": "cab" },
            { "One": "abd", "Two": "bda", "Three": "cdb" },
            { "One": "abd", "Two": "bda", "Three": "cdb", "Four": "Something new!" }
        ]
        var fields = Object.keys(json[3]); // need to check all fields
        var replace = function(key, value) { return value === null ? '' : value }
        var data = json.map(function(row) {
            return fields.map(function(fieldName) { return row[fieldName] ? row[fieldName] : "" }); 
        });
        data.unshift(fields);
        console.log(JSON.stringify(data));
    </script>

</div></body>

</html>